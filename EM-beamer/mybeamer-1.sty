\NeedsTeXFormat{LaTeX2e}
\usepackage[]{inputenc}  %接受不同的输入编码
\usepackage[T1]{fontenc}
\RequirePackage[slantfont,boldfont,CJKnumber]{xeCJK}
\RequirePackage{fontspec,xunicode}

% other packages
\usepackage{latexsym,multicol,booktabs,calligra}
\usepackage{listings, xcolor, geometry, graphicx,stackengine,xltxtra}
\RequirePackage{type1cm} %设置字体大小

%  Chinese characters in MAC
%\usepackage{ctex}

\defaultfontfeatures{Mapping=tex-text} %如果没有它，会有一些 tex 特殊字符无法正常使用，比如连字符。
\newcommand{\Heiti}{\CJKfontspec{STXihei}}     %华文黑体
\newcommand{\Songti}{\CJKfontspec{STSong}}  %华文宋体
\newcommand{\Kaiti}{\CJKfontspec{STKaitiSC-Regular}}       %楷体-简
\newcommand{\Lishu}{\CJKfontspec{STLibianSC-Regular}}       %隶变-简
\newcommand{\Weibei}{\CJKfontspec{WeibeiSC-Bold}}              %魏碑-简
\newcommand{\MLWti}{\CJKfontspec{MLingWaiMedium-SC}}    %凌慧体-简, 用于手写体
\newcommand{\Pingfang}{\CJKfontspec{PingFangSC-Regular}}    %凌慧体-简, 用于手写体

\setCJKmainfont{STSongti-SC-Regular}[BoldFont=STSong, ItalicFont=SimSong-Regular]      
\setCJKsansfont{SimSong-Bold}
\setCJKmonofont{FZLTXHB--B51-0}
\setmainfont{TimesNewRomanPSMT}
\setsansfont{ArialMT}
\setmonofont{Helvetica}
\usepackage{times}  %使得英文默认字体都是Times New Roman


%%%数学公式
\usepackage{amsthm,amsmath,amsfonts,amssymb}
\usepackage{bm}                      %%公式加粗
\usepackage[]{unicode-math}  % GOOD for Xelatex 
%\setmathfont{texgyrepagella-math.otf}
\setmathfont{Asana-Math.otf}    %%% 不含  $\hbar$

% defs 原生TeX语言
\def\cmd#1{\texttt{\color{red}\footnotesize $\backslash$#1}}
\def\env#1{\texttt{\color{blue}\footnotesize #1}}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{halfgray}{gray}{0.55}

%\usepackage{listings}   代码段全局设置
\lstset{
	basicstyle=\ttfamily\small,                          % 代码字体
	keywordstyle=\bfseries\color{deepblue},
	emphstyle=\ttfamily\color{deepred},            
	stringstyle=\color{deepgreen},
	numbers=left,                                             % 代码行号位置
	numberstyle=\small\color{halfgray},
	rulesepcolor=\color{red!20!green!20!blue!20},
	frame=shadowbox,
}

%\RequirePackage{easyphys}  %%%%
\RequirePackage{tikz}     % 作图
\RequirePackage{cutwin}  % 图文混排
\usetikzlibrary {3d} 
\usetikzlibrary {datavisualization.formats.functions}
\newcommand*{\num}{pi}


%%% blocks
%\usepackage{amsthm}
\theoremstyle{plain}
\newtheorem{algo}{算法~}[section]
\newtheorem{thm}{定理~}[section]
\newtheorem{lem}[thm]{引理~}
\newtheorem{prop}[thm]{命题~}
\newtheorem{cor}[thm]{推论~}
\theoremstyle{definition}
\newtheorem{defn}{定义~}[section]
\newtheorem{conj}{猜想~}[section]
\newtheorem{exmp}{例~}[section]
\newtheorem{rem}{注~}
\newtheorem{case}{情形~}
\theoremstyle{remark}
\newtheorem{bthm}[thm]{定理~}
\newtheorem{blem}[thm]{引理~}
\newtheorem{bprop}[thm]{命题~}
\newtheorem{bcor}[thm]{推论~}

\renewcommand{\proofname}{\bf 证明}
\renewcommand*{\proofname}{\normalfont\bfseries证明} %
\renewcommand\contentsname{目录}
\renewcommand\refname{参考文献} %
\renewcommand\figurename{图} %
\renewcommand\tablename{表}%
\newcommand\versiontext{版本：}%
\newcommand\updatetext{最后更新：}%
\renewcommand\abstractname{摘\hspace{2em}要}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\mode<presentation>

\newif\ifbeamer@secheader
\beamer@secheaderfalse

%\DeclareOptionBeamer{secheader}{\beamer@secheadertrue}
\ProcessOptionsBeamer

\useoutertheme[footline=authorinstitutetitle,subsection=false]{smoothbars}

\makeatletter 

% [add curpage/total page at the bottom](http://tex.stackexchange.com/questions/100838/beamer-dresden-theme-miniframes-appeareance-and-frame-number-insertion)
\newcommand{\frameofframes}{/}
\newcommand{\setframeofframes}[1]{\renewcommand{\frameofframes}{#1}}
\setbeamertemplate{footline} 
  {%
    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line foot}
    \end{beamercolorbox}
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{author in head/foot}%
      \leavevmode{\usebeamerfont{author in head/foot}\insertshortauthor}%
      \hfill%
      {\usebeamerfont{institute in head/foot}\usebeamercolor[fg]{institute in head/foot}\insertshortinstitute}%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
      {\usebeamerfont{title in head/foot}\insertshorttitle}%
      \hfill%
      {\usebeamerfont{frame number}\usebeamercolor[fg]{frame number}\insertframenumber~\frameofframes~\inserttotalframenumber}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line foot}
    \end{beamercolorbox}
  }
\makeatother

\useinnertheme{circles}
%\useoutertheme{default}
%\useinnertheme[shadow=true]{rounded}

%define qut theme color 
\xdefinecolor{qut}{HTML}{00407a}  %PANTONE 541 BLUE
\setbeamercolor{footline}{bg=qut}
\setbeamercolor{frametitle}{bg=qut,fg=white}
\setbeamercolor{title}{bg=qut}
\setbeamerfont{frametitle}{size=\large}

%\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{bibliography item}[text]
\setbeamertemplate{caption}[numbered]

\setbeamercolor{palette primary}{use=structure,fg=white,bg=structure.fg}
\setbeamercolor{palette secondary}{use=structure,fg=white,bg=structure.fg!75!black}
\setbeamercolor{palette tertiary}{use=structure,fg=white,bg=structure.fg!50!black}
\setbeamercolor{palette quaternary}{fg=white,bg=structure.fg!50!black}
\setbeamercolor{titlelike}{parent=palette primary}

%% try
\setbeamercolor{block title}{bg=qut}
\setbeamercolor*{block title example}{use={normal text,example text},bg=white,fg=qut}
\setbeamercolor{fine separation line}{}
\setbeamercolor{item projected}{fg=white}
\setbeamercolor{palette sidebar primary}{use=normal text,fg=normal text.fg}
\setbeamercolor{palette sidebar quaternary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar secondary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar tertiary}{use=normal text,fg=normal text.fg}
\setbeamercolor{section in sidebar}{fg=brown}
\setbeamercolor{section in sidebar shaded}{fg=grey}
\setbeamercolor{separation line}{}
\setbeamercolor{sidebar}{bg=qut}
\setbeamercolor{sidebar}{parent=palette primary}
\setbeamercolor{structure}{fg=qut}
\setbeamercolor{subsection in sidebar}{fg=brown}
\setbeamercolor{subsection in sidebar shaded}{fg=grey}
\setbeamercolor{block title}{fg=white}
\setbeamercolor{block body}{bg=structure.bg!35!yellow}

\AtBeginSection[]{
	\begin{frame}
		\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/hide,subsubsectionstyle=show/shaded/hide]
	\end{frame}
}
\AtBeginSubsection[]{
	\begin{frame}
		\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/hide,subsubsectionstyle=show/shaded/hide]
	\end{frame}
}


% graphics path
\graphicspath{{./figure/}{./figures/}{./image/}{./images/}{./graphics/}{./graphic/}{./pictures/}{./picture/}}

\mode
<all>