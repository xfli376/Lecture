%% This is  mynewbeamer.sty'.
%% Version: 2021/12/1 
%% Auther: xfli
%% !请勿轻易改动此文档中代码.
%%%% ----------------------------------------------------------------
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mynewbeamer}[2021/12/01]
%%%% -------------------------------------------------------------

%\usefonttheme[onlymath]{serif}
\usefonttheme{professionalfonts}
\RequirePackage{tikz}
\RequirePackage{cutwin}  % 图文混排
%\usetikzlibrary {3d} 
%\usetikzlibrary {datavisualization.formats.functions}

\RequirePackage{tcolorbox}% 绘制彩色框.
\RequirePackage{multicol}%  one to muticolumn
\RequirePackage{ulem}% ulem: under line for emphasis.
\RequirePackage{tabularx}%  智能表格环境.
\RequirePackage{xhfill}% xhfill: 定制化线填充.
\RequirePackage{listings}%  for source code printing 

\RequirePackage{color}  % color content
\RequirePackage{xcolor}% \color{red!50!green!20!blue}
\RequirePackage{graphicx}
\RequirePackage{graphics}
\RequirePackage{subfigure}

\RequirePackage{comment}% comment: 提供注释环境
\RequirePackage{algorithm,algorithmic}
\RequirePackage{amsthm}
\RequirePackage{float}                           %HERE!!!!!!!!!!!!!!

%\RequirePackage{varioref}% varioref: 交叉引用.
%\RequirePackage{cleveref}% cleveref: 交叉引用.
%\RequirePackage[backend=biber,autolang=hyphen,style=gb7714-2015,gbalign=gb7714-2015,%style=gb7714-2015ms
%gbstyle=false,url=false,doi=false,isbn=false,sorting=none]{biblatex}% biblatex: 参考文献.

\RequirePackage{xeCJK} %导入中文包
\RequirePackage{unicode-math}% unicode-math: opentype 数学字体.
\RequirePackage{fontawesome}% fontawesome: 提供可缩放矢量图标.

\setmainfont{Times New Roman}%  缺省英文字体.
\setCJKmainfont[ItalicFont={STKaitiSC-Regular}, BoldFont={STHeitiSC-Light}]{SimSong-Regular}% 衬线字体 缺省中文字体
\setCJKsansfont[BoldFont={STXihei}]{WeibeiSC-Bold} %sansfont 是无衬线字体，用于标题。
\setCJKmonofont{STFangsong}% 中文等宽字体
\setCJKfamilyfont{nicefont}{DFWaWaSC-W5}% 这里先把DFWaWaSC-W5导入CJK家族字体，后面用\CJKfamily{nicefont}调用。
\newcommand{\myfont}{\CJKfamily{nicefont}}%這一步是使用简化的\myfont


%----------------------
%
% Presentation 环境
%
%---------------------
\mode<presentation>
%设置Beamer主题----- 效果见 https://hartwork.org/beamer-theme-matrix/
\usetheme{Antibes} %主题
%AnnArbor， Antibes， Bergen， Berkeley， Berlin， Boadilla， cambridgeUS， Copenhagen，
%Darmstadt， default，Dresden，Frankfurt，Goettingen，Hannover，Ilmenau，JuanLesPins，Luebeck，
%Madrid， Malmoe， Marburg， Montpellier，PaloAlto，Pittsburgh，Rochester，Singapore，Szeged，Warsaw
%------------------
\useoutertheme{smoothbars} %smoothbars， tree， sidebar， shadow， split， miniframes， infolines， default
\useinnertheme{rounded} % default ，circles ，rectangle， rounded
\usecolortheme{rose} % beaver,beetle, albatross,default, crane, dolphin, dove, mfly, lily, orchid,mrose, seagull, seahorse, whale, wolverine


%\setbeamertemplate{navigation symbols}{}%empty

% Background
\pgfdeclareimage[height=6.2ex,width=0.14\paperwidth]{xx}{figs/uestcxx.png}
\pgfdeclareimage[height=\paperheight,width=\paperwidth]{myimage}{figs/uestclogo.png}
\usebackgroundtemplate{\tikz\node[opacity=0.15,inner sep=0] {\pgfuseimage{myimage}};}

% 半透明化尚未出现的内容.
%\setbeamercovered{transparent}
% 幻灯标题字体设置.
\setbeamerfont{frametitle}{size=\normalsize,series=\bfseries}
% 封页字体设置.
\setbeamerfont{title}{size=\Large,series=\bfseries}
\setbeamerfont{subtitle}{size=\footnotesize,series=\bfseries}
\setbeamerfont{author}{size=\normalsize}
\setbeamerfont{date}{size=\scriptsize}

\setbeamerfont{block title}{size=\normalsize}
\setbeamerfont{structure}{size=\normalsize,series=\bfseries}
% 脚注字号设置.
\setbeamerfont{footnote}{size=\scriptsize}
% 页眉页脚字体设置
\setbeamerfont{section in head/foot}{size=\scriptsize,series=\bfseries}
\setbeamerfont{subsection in head/foot}{size=\scriptsize,series=\bfseries}
\setbeamerfont{author in head/foot}{size=\scriptsize,series=\bfseries}
\setbeamerfont{institute in head/foot}{size=\scriptsize,series=\bfseries}
\setbeamerfont{date in head/foot}{size=\scriptsize,series=\bfseries}
\setbeamerfont{title in head/foot}{size=\scriptsize}
\setbeamerfont{framenumber in head/foot}{size=\tiny,series=\bfseries}

% listing 颜色设置
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{halfgray}{gray}{0.55}
\lstset{
	basicstyle=\ttfamily\small,
	keywordstyle=\bfseries\color{deepblue},
	emphstyle=\ttfamily\color{deepred},    % Custom highlighting style
	stringstyle=\color{deepgreen},
	numbers=left,
	numberstyle=\small\color{halfgray},
	rulesepcolor=\color{red!20!green!20!blue!20},
	frame=shadowbox,
}

% 页眉页脚颜色设置.
\definecolor{uestcxxbg}{RGB}{225,150,63}
\definecolor{uestcE}{RGB}{255,165,0}
% 调色板一设置.
\setbeamercolor{palette primary}{bg=blue,fg=white}
% 调色板二设置.
\setbeamercolor{palette secondary}{bg=uestcxxbg,fg=white!80!black}
% 调色板三设置.
\setbeamercolor{palette tertiary}{bg=blue!10!green,fg=white}
% 调色板四设置.
\setbeamercolor{palette quaternary}{bg=uestcxxbg,fg=white!80!red}

\setbeamercolor{section in head/foot}{parent=palette primary}
\setbeamercolor{subsection in head/foot}{parent=tertiary primary}
\setbeamercolor{title in head/foot}{parent=structure}
\setbeamercolor{author in head/foot}{parent=palette secondary}
\setbeamercolor{institute in head/foot}{parent=palette primary}
\setbeamercolor{date in head/foot}{parent=palette primary}
\setbeamercolor{framenumber in head/foot}{parent=palette quaternary}
\setbeamercolor{frametitle}{bg=blue,fg=uestcE}

% itemize 环境序号设置.
\setbeamertemplate{itemize item}{\scriptsize\raise1.25pt\hbox{\textbullet}}
\setbeamertemplate{itemize subitem}{\scriptsize\raise1.25pt\hbox{\textbullet}}
\setbeamertemplate{itemize subsubitem}{\scriptsize\raise1.25pt\hbox{\textbullet}}
% 参考文献目录字号设置.
%\renewcommand*{\bibfont}{\small}

% ----------------
% Headline Layout
% 格式: SECTION (ALL) | NAME OF SCU.
% ----------------
\defbeamertemplate{headline}{my headline theme}%
{%
	\leavevmode% 离开垂直模式
	\hbox{%
        \begin{beamercolorbox}[wd=.08\paperwidth,ht=5.75ex,dp=.25ex,center]{author in head/foot}
            \hspace*{0.001em}%
            \usebeamerfont{author in head/foot} \insertauthor 
            \hspace*{1.175em} \vskip 1.1ex%
        \end{beamercolorbox}%
        \begin{beamercolorbox}[wd=.06\paperwidth,ht=5.75ex,dp=.25ex,center]{framenumber in head/foot} 
            \hspace*{0.001em}%
            \usebeamerfont{framenumber in head/foot} \insertframenumber\,/\,\inserttotalframenumber
            \hspace*{1.175em} \vskip 1.1ex%
        \end{beamercolorbox}%
		\begin{beamercolorbox}[wd=.72\paperwidth,ht=5.75ex,dp=.25ex]{section in head/foot}%
			\hspace*{0.01em}%
			\usebeamerfont{section in head/foot}\insertsectionnavigationhorizontal{.6\textwidth}{}{}%
			\hspace*{1.175em} \vskip.02ex%
		\end{beamercolorbox}%
		\begin{beamercolorbox}[wd=.14\paperwidth,ht=5.75ex,dp=.25ex,center]{section in head/foot}%
			\pgfuseimage{xx}%\hspace*{2.6em}%
		\end{beamercolorbox}%
	}%
}
\setbeamertemplate{headline}[my headline theme]
%-----------

\setbeamertemplate{frametitle}{%
	\vskip-0.002\textheight%
	\leavevmode%
    \hspace*{-.08\paperwidth}
	\hbox{%
		\begin{beamercolorbox}[wd=0.29\paperwidth,ht=2.75ex,dp=0.25ex,center]{frametitle}%
			\usebeamerfont{frametitle}\insertframetitle \vskip.025ex%
		\end{beamercolorbox}%
	}
}

% -----------------------------------------------------
%


\makeatother

\mode
<all>


